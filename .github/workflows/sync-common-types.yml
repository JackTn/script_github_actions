name: Sync Common Types

# è§¦å‘æ¡ä»¶ï¼šåœ¨ push åˆ° main åˆ†æ”¯å
on:
  push:
    branches:
      - main
    paths: 
      - 'specification/common-types/**'
  schedule:
    - cron: '* */3 * * *' # æ¯3å°æ—¶è§¦å‘, å¯¹äºä¸€äº›æ›´æ–°ä¸é‚£ä¹ˆé¢‘ç¹çš„é¡¹ç›®å¯ä»¥è®¾ç½®ä¸ºæ¯å¤©ä¸€æ¬¡, ä½ç¢³ä¸€ç‚¹

permissions:
  pull-requests: write

jobs:
  sync-branches:
    runs-on: ubuntu-latest
    name: Syncing branches
    steps:
      - name: Checkout
        uses: actions/checkout@v2
      - name: Set up Node
        uses: actions/setup-node@v1
        with:
          node-version: 12
      - name: Opening pull request
        id: pull
        uses: tretuna/sync-branches@1.4.0
        with:
          GITHUB_TOKEN: ${{secrets.ACCESS_TOKEN}}
          FROM_BRANCH: "main"
          TO_BRANCH: "rpaas"
          REVIEWERS: '["JackTn"]'
          PULL_REQUEST_TITLE: 'sync common-type from main to rpaas' #Default: sync: {FROM_BRANCH} to {TO_BRANCH}
          PULL_REQUEST_BODY: '123123' #Default: sync-branches: New code has just landed in {FROM_BRANCH} so let's bring {TO_BRANCH} up to speed!
      - run: echo "new pr is in the ${{ steps.pull.outputs.PULL_REQUEST_URL }}"
  
  test-echo:
    runs-on: ubuntu-latest
    name: test echo
    steps:
      - run: echo "ğŸ’¡ The ${{ github.repository }} repository has been cloned to the runner."
    

#jobs:
#  file_sync:
#    runs-on: ubuntu-latest
#    steps: 
#      - name: Fetching Local Repository
#        uses: actions/checkout@main
#      - name: File Sync
#        uses: kbrashears5/github-action-file-sync@v2.0.0
#        with:
#          REPOSITORIES: |
#            JackTn/script_github_actions@rpaas
#          FILES: |
#            specification/common-types
#          TOKEN: ${{ secrets.ACCESS_TOKEN }}


#jobs:
#  sync-file:
#    runs-on: ubuntu-latest
#    steps:
#      - name: Checkout files
#        uses: actions/checkout@v2
#        with:
#          repository: JackTn/script_github_actions
#          token: ${{ secrets.ACCESS_TOKEN }}
#      - name: Sync files with dst-octocat-repsotiory!
#        uses: denis-tingajkin/sync-files@main
#        with:
#          git-author-email: 'jacktn@github.com'
#          git-author-name: 'jacktn'
#          sync-branch-name: 'main'
#          allow-files-pattern: 'specification/common-types/**'
#          sync-repository: 'bosstn/script_github_actions'


# ä»»åŠ¡
#jobs:
#  build-and-deploy:
#    # æœåŠ¡å™¨ç¯å¢ƒï¼šæœ€æ–°ç‰ˆ Ubuntu
#    runs-on: ubuntu-latest
#    steps:
#      # æ‹‰å–ä»£ç 
#      - name: Checkout
#        uses: actions/checkout@v2
#        with:
#          persist-credentials: false
#
#      # 1ã€ç”Ÿæˆé™æ€æ–‡ä»¶
#      - name: Build
#        run: npm install && npm run build
#
#      # 2ã€éƒ¨ç½²åˆ° GitHub Pages
#      - name: Deploy
#        uses: JamesIves/github-pages-deploy-action@releases/v3
#        with:
#          ACCESS_TOKEN: ${{ secrets.ACCESS_TOKEN }}
#          REPOSITORY_NAME: somenzz/somenzz.github.io
#          BRANCH: master
#          FOLDER: public
#          #æ³¨æ„è¿™é‡Œçš„ public æ˜¯ä»“åº“æ ¹ç›®å½•ä¸‹çš„ publicï¼Œä¹Ÿå°±æ˜¯ npm run build ç”Ÿæˆé™æ€èµ„æºçš„è·¯å¾„ï¼Œæ¯”å¦‚æœ‰çš„äººæ˜¯ `docs/.vuepress/dist`
#
#      # 3ã€åŒæ­¥åˆ° gitee çš„ä»“åº“
#      - name: Sync to Gitee
#        uses: wearerequired/git-mirror-action@master
#        env:
#          # æ³¨æ„åœ¨ Settings->Secrets é…ç½® GITEE_RSA_PRIVATE_KEY
#          SSH_PRIVATE_KEY: ${{ secrets.GITEE_RSA_PRIVATE_KEY }}
#        with:
#          # æ³¨æ„æ›¿æ¢ä¸ºä½ çš„ GitHub æºä»“åº“åœ°å€
#          source-repo: git@github.com:somenzz/somenzz.github.io.git
#          # æ³¨æ„æ›¿æ¢ä¸ºä½ çš„ Gitee ç›®æ ‡ä»“åº“åœ°å€
#          destination-repo: git@gitee.com:somenzz/somenzz.git
#
#      # 4ã€éƒ¨ç½²åˆ° Gitee Pages
#      - name: Build Gitee Pages
#        uses: yanglbme/gitee-pages-action@main
#        with:
#          # æ³¨æ„æ›¿æ¢ä¸ºä½ çš„ Gitee ç”¨æˆ·å
#          gitee-username: island
#          # æ³¨æ„åœ¨ Settings->Secrets é…ç½® GITEE_PASSWORD
#          gitee-password: ${{ secrets.GITEE_PASSWORD }}
#          # æ³¨æ„æ›¿æ¢ä¸ºä½ çš„ Gitee ä»“åº“ï¼Œä»“åº“åä¸¥æ ¼åŒºåˆ†å¤§å°å†™ï¼Œè¯·å‡†ç¡®å¡«å†™ï¼Œå¦åˆ™ä¼šå‡ºé”™
#          gitee-repo: somenzz/somenzz
#          # è¦éƒ¨ç½²çš„åˆ†æ”¯ï¼Œé»˜è®¤æ˜¯ masterï¼Œè‹¥æ˜¯å…¶ä»–åˆ†æ”¯ï¼Œåˆ™éœ€è¦æŒ‡å®šï¼ˆæŒ‡å®šçš„åˆ†æ”¯å¿…é¡»å­˜åœ¨ï¼‰
#          branch: master
#
#      # 5ã€éƒ¨ç½²åˆ° xxxx.cnæœåŠ¡å™¨
#      - name: rsync deployments
#        uses: burnett01/rsync-deployments@4.1
#        with:
#          # è¿™é‡Œæ˜¯ rsync çš„å‚æ•° switches: -avzh --delete --exclude="" --include="" --filter=""
#          switches: -avzh
#          path: public/
#          remote_path: /home/ubuntu/public/
#          remote_host: xxxx.cn
#          remote_port: 22
#          remote_user: ubuntu
#          remote_key: ${{ secrets.MY_UBUNTU_RSA_PRIVATE_KEY }}
